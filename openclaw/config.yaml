# OpenClaw Home Assistant Addon Configuration
# https://developers.home-assistant.io/docs/add-ons/configuration

name: "OpenClaw"
description: "OpenClaw.ai personal AI assistant with Home Assistant integration"
version: "0.2.39"
slug: "openclaw"
url: "https://github.com/openclaw/openclaw"

# Supported architectures
arch:
  - aarch64
  - amd64

# Use s6-overlay instead of init system
init: false

# Home Assistant API access
homeassistant_api: true
hassio_api: true

# Ingress configuration
ingress: true
ingress_port: 18789
ingress_stream: true
panel_icon: "mdi:robot"
panel_title: "OpenClaw"

# Network ports (direct access bypasses ingress WebSocket issues)
ports:
  18789/tcp: 18789
  18790/tcp: 18790

# Host network mode for better WebSocket compatibility
host_network: true

# Directory mappings
map:
  - share:rw
  - data:rw

# Addon options with defaults
options:
  anthropic_api_key: ""
  claude_oauth_credentials: ""
  ha_access_token: ""
  log_level: "info"
  workspace_path: "/share/openclaw"
  signal_enabled: false
  signal_phone: ""
  voice_transcription: "none"
  tts_voice: ""
  dns_overrides: []

# Schema for options validation
schema:
  anthropic_api_key: "password?"
  claude_oauth_credentials: "password?"
  ha_access_token: "password?"
  log_level: list(debug|info|warn|error)
  workspace_path: str
  signal_enabled: bool
  signal_phone: "str?"
  voice_transcription: list(sherpa-onnx|whisper|none)
  tts_voice: "str?"
  dns_overrides: ["str?"]

# Environment variables are set dynamically in init-openclaw/run
# to ensure consistent paths across all components
